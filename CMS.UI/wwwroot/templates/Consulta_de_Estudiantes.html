<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Estudiantes</title>
    <!-- Tailwind CSS para un diseño moderno y adaptable -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Iconos de Lucide -->
    <script src="https://unpkg.com/lucide-react@latest/dist/lucide-react.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilos para las pestañas activas e inactivas */
        .tab-active {
            border-bottom-color: #3b82f6; /* blue-500 */
            color: #3b82f6;
            font-weight: 600;
        }
        .tab-inactive {
            border-bottom-color: transparent;
            color: #6b7280; /* gray-500 */
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-4xl">
        <!-- Encabezado y barra de búsqueda -->
        <div class="bg-white p-6 rounded-xl shadow-md mb-6">
            <div class="flex items-center mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-500"><path d="M15 14c.2-1 .7-1.7 1.5-2.5C17.7 10.2 19 8.9 19 7c0-2.2-1.8-4-4-4S11 4.8 11 7c0 1.9 1.3 3.2 2.5 4.5.8.8 1.3 1.5 1.5 2.5"/><path d="M9 12c0-2.2 1.8-4 4-4s4 1.8 4 4"/><path d="M12 12v10"/><path d="M8 17h8"/><path d="m5 17-1.08-1.14A5 5 0 0 1 5 9V7a4 4 0 0 1 4-4h2"/></svg>
                <h1 class="text-2xl font-bold ml-2">Portal de Consulta Estudiantil</h1>
            </div>
            <p class="text-gray-600 mb-4">Busque un estudiante por cédula, ID, nombre o apellido.</p>
            <div class="flex flex-col sm:flex-row gap-2">
                <input type="text" id="searchInput" placeholder="Escriba aquí para buscar..." class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                <button id="searchButton" class="bg-blue-500 text-white font-semibold px-6 py-3 rounded-lg hover:bg-blue-600 transition shadow-sm flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    Buscar
                </button>
            </div>
        </div>

        <!-- Área de resultados -->
        <div id="resultsContainer" class="bg-white p-6 rounded-xl shadow-md">
            <!-- Mensaje inicial -->
            <div id="initialMessage" class="text-center text-gray-500 py-10">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-4 text-gray-400"><path d="M12 12h.01"/><path d="M10 18v-2a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v2"/><path d="M10 14.5a2.5 2.5 0 0 1 5 0"/><path d="M18 8a2 2 0 0 0-2-2h-1a2 2 0 0 0-2 2v1c0 1.1.9 2 2 2h1a2 2 0 0 0 2-2Z"/><path d="M6 8a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v1c0 1.1-.9 2-2 2H8a2 2 0 0 1-2-2Z"/><circle cx="12" cy="12" r="10"/></svg>
                <p>Ingrese un término de búsqueda para ver la información del estudiante.</p>
            </div>
            
            <!-- Mensaje de no encontrado -->
            <div id="notFoundMessage" class="hidden text-center text-red-500 py-10">
                 <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-4"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>
                <p class="font-semibold">No se encontraron resultados.</p>
                <p class="text-sm text-gray-600">Verifique los datos ingresados e intente de nuevo.</p>
            </div>

            <!-- Contenido del estudiante (inicialmente oculto) -->
            <div id="studentContent" class="hidden">
                <h2 id="studentNameHeader" class="text-2xl font-bold text-gray-800 mb-4"></h2>
                
                <!-- Pestañas de navegación -->
                <div class="border-b border-gray-200 mb-4">
                    <nav class="flex -mb-px" aria-label="Tabs">
                        <button class="tab-btn py-4 px-1 border-b-2 text-sm font-medium tab-active" data-tab="personal">Información Personal</button>
                        <button class="tab-btn py-4 px-1 border-b-2 text-sm font-medium tab-inactive ml-8" data-tab="academica">Información Académica</button>
                        <button class="tab-btn py-4 px-1 border-b-2 text-sm font-medium tab-inactive ml-8" data-tab="financiera">Información Financiera</button>
                    </nav>
                </div>

                <!-- Contenido de las pestañas -->
                <div>
                    <!-- Información Personal -->
                    <div id="tab-personal" class="tab-content active">
                        <ul class="space-y-3 text-gray-700">
                            <li><strong>ID Estudiante:</strong> <span id="personal-id"></span></li>
                            <li><strong>Cédula:</strong> <span id="personal-cedula"></span></li>
                            <li><strong>Nombre Completo:</strong> <span id="personal-nombre"></span></li>
                            <li><strong>Fecha de Nacimiento:</strong> <span id="personal-nacimiento"></span></li>
                            <li><strong>Email:</strong> <span id="personal-email"></span></li>
                            <li><strong>Teléfono:</strong> <span id="personal-telefono"></span></li>
                        </ul>
                    </div>
                    <!-- Información Académica -->
                    <div id="tab-academica" class="tab-content">
                         <ul class="space-y-3 text-gray-700">
                            <li><strong>Carrera:</strong> <span id="academica-carrera"></span></li>
                            <li><strong>Estado:</strong> <span id="academica-estado"></span></li>
                            <li><strong>Promedio General:</strong> <span id="academica-promedio"></span></li>
                            <li><strong>Créditos Aprobados:</strong> <span id="academica-creditos"></span></li>
                        </ul>
                    </div>
                    <!-- Información Financiera -->
                    <div id="tab-financiera" class="tab-content">
                        <div id="financial-alert" class="hidden p-4 mb-4 text-sm rounded-lg" role="alert">
                            <span class="font-medium" id="financial-alert-text"></span>
                        </div>
                         <ul class="space-y-3 text-gray-700">
                            <li><strong>Saldo Pendiente:</strong> <span id="financiera-saldo" class="font-bold"></span></li>
                            <li><strong>Fecha Último Pago:</strong> <span id="financiera-pago"></span></li>
                            <li><strong>Estado de Cuenta:</strong> <span id="financiera-estado"></span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- SIMULACIÓN DE BASE DE DATOS ---
        // En una aplicación real, estos datos vendrían de una llamada a una API (backend)
        // que se conecta a la base de datos SQL.
        const dbEstudiantes = [
            {
                estudianteID: 1,
                cedula: "1-1234-5678",
                nombre: "Ana",
                apellido: "García",
                fechaNacimiento: "1998-05-15",
                email: "ana.garcia@email.com",
                telefono: "8888-1111",
                carrera: "Ingeniería en Sistemas",
                estadoAcademico: "Activo",
                promedio: 88.5,
                creditos: 120,
                saldoPendiente: 0.00,
                ultimoPago: "2025-06-20"
            },
            {
                estudianteID: 2,
                cedula: "2-0987-6543",
                nombre: "Carlos",
                apellido: "Martínez",
                fechaNacimiento: "1999-11-22",
                email: "carlos.m@email.com",
                telefono: "8888-2222",
                carrera: "Administración de Empresas",
                estadoAcademico: "Activo",
                promedio: 82.1,
                creditos: 95,
                saldoPendiente: 550.75,
                ultimoPago: "2025-03-15"
            },
            {
                estudianteID: 3,
                cedula: "9-0123-4567",
                nombre: "Sofía",
                apellido: "Rodríguez",
                fechaNacimiento: "2000-01-30",
                email: "sofia.r@email.com",
                telefono: "8888-3333",
                carrera: "Derecho",
                estadoAcademico: "Inactivo",
                promedio: 91.0,
                creditos: 150,
                saldoPendiente: 0.00,
                ultimoPago: "2024-11-10"
            }
        ];

        // --- REFERENCIAS A ELEMENTOS DEL DOM ---
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const initialMessage = document.getElementById('initialMessage');
        const notFoundMessage = document.getElementById('notFoundMessage');
        const studentContent = document.getElementById('studentContent');
        const studentNameHeader = document.getElementById('studentNameHeader');
        
        const tabs = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        // --- LÓGICA DE LA APLICACIÓN ---

        // Función para buscar un estudiante
        function buscarEstudiante() {
            const query = searchInput.value.trim().toLowerCase();
            if (!query) return;

            const resultado = dbEstudiantes.find(est => 
                est.cedula.toLowerCase().includes(query) ||
                est.estudianteID.toString().toLowerCase().includes(query) ||
                est.nombre.toLowerCase().includes(query) ||
                est.apellido.toLowerCase().includes(query)
            );

            if (resultado) {
                mostrarDatos(resultado);
            } else {
                mostrarNoEncontrado();
            }
        }

        // Función para mostrar los datos del estudiante encontrado
        function mostrarDatos(estudiante) {
            initialMessage.classList.add('hidden');
            notFoundMessage.classList.add('hidden');
            studentContent.classList.remove('hidden');

            // Encabezado
            studentNameHeader.textContent = `${estudiante.nombre} ${estudiante.apellido}`;

            // Pestaña Personal
            document.getElementById('personal-id').textContent = estudiante.estudianteID;
            document.getElementById('personal-cedula').textContent = estudiante.cedula;
            document.getElementById('personal-nombre').textContent = `${estudiante.nombre} ${estudiante.apellido}`;
            document.getElementById('personal-nacimiento').textContent = new Date(estudiante.fechaNacimiento).toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' });
            document.getElementById('personal-email').textContent = estudiante.email;
            document.getElementById('personal-telefono').textContent = estudiante.telefono;

            // Pestaña Académica
            document.getElementById('academica-carrera').textContent = estudiante.carrera;
            document.getElementById('academica-estado').textContent = estudiante.estadoAcademico;
            document.getElementById('academica-promedio').textContent = estudiante.promedio;
            document.getElementById('academica-creditos').textContent = estudiante.creditos;

            // Pestaña Financiera y Alerta
            const saldo = estudiante.saldoPendiente;
            const financialAlert = document.getElementById('financial-alert');
            const financialAlertText = document.getElementById('financial-alert-text');
            
            document.getElementById('financiera-saldo').textContent = `$${saldo.toFixed(2)}`;
            document.getElementById('financiera-pago').textContent = new Date(estudiante.ultimoPago).toLocaleDateString('es-ES');

            if (saldo > 0) {
                document.getElementById('financiera-saldo').classList.add('text-red-600');
                document.getElementById('financiera-estado').textContent = "Con Saldo Pendiente";
                document.getElementById('financiera-estado').classList.add('text-red-600', 'font-semibold');
                
                financialAlertText.textContent = `¡ALERTA! Este estudiante tiene un saldo pendiente de $${saldo.toFixed(2)}.`;
                financialAlert.classList.remove('hidden', 'bg-green-100', 'text-green-800');
                financialAlert.classList.add('bg-red-100', 'text-red-800');
            } else {
                document.getElementById('financiera-saldo').classList.remove('text-red-600');
                document.getElementById('financiera-estado').textContent = "Al día";
                document.getElementById('financiera-estado').classList.remove('text-red-600', 'font-semibold');

                financialAlertText.textContent = '¡Excelente! El estudiante se encuentra al día con sus pagos.';
                financialAlert.classList.remove('hidden', 'bg-red-100', 'text-red-800');
                financialAlert.classList.add('bg-green-100', 'text-green-800');
            }
            
            // Resetear a la primera pestaña
            switchTab('personal');
        }

        // Función para mostrar el mensaje de "no encontrado"
        function mostrarNoEncontrado() {
            initialMessage.classList.add('hidden');
            studentContent.classList.add('hidden');
            notFoundMessage.classList.remove('hidden');
        }

        // Función para cambiar de pestaña
        function switchTab(tabId) {
            tabs.forEach(tab => {
                if (tab.dataset.tab === tabId) {
                    tab.classList.remove('tab-inactive');
                    tab.classList.add('tab-active');
                } else {
                    tab.classList.remove('tab-active');
                    tab.classList.add('tab-inactive');
                }
            });

            tabContents.forEach(content => {
                if (content.id === `tab-${tabId}`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
        }

        // --- EVENT LISTENERS ---
        searchButton.addEventListener('click', buscarEstudiante);
        searchInput.addEventListener('keyup', (event) => {
            if (event.key === 'Enter') {
                buscarEstudiante();
            }
        });

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                switchTab(tab.dataset.tab);
            });
        });

    </script>
</body>
</html>
